<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Epic Memory Card Game</title>
<link rel="icon" type="png" href="/images/WebEpic-Memory-GameLogo.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root {
    --primary: #8b5cf6;
    --primary-dark: #7c3aed;
    --success: #10b981;
    --danger: #ef4444;
    --dark: #1e1b4b;
    --light: #f8fafc;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Poppins', 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #1e1b4b 0%, #4c1d95 100%);
    color: white;
    min-height: 100vh;
    padding: 15px;
    overflow-x: hidden;
  }
  .container {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
  }
  h1 {
    font-size: 3.5rem;
    margin: 20px 0;
    background: linear-gradient(90deg, #c084fc, #60a5fa);
    background-clip: text;
    -webkit-background-clip: text;   /* Œ≥ŒπŒ± Safari & œÄŒ±ŒªŒπŒøœçœÇ browsers */
    color: transparent;             /* œÄŒπŒø Œ∫Œ±Œ∏Œ±œÅœå Œ±œÄœå -webkit-text-fill-color */
    text-shadow: 0 4px 20px rgba(0,0,0,0.5);
  }
  .powered {
    font-size: 1.1rem;
    margin: 10px 0;
    opacity: 0.9;
    font-weight: 600;
  }
  .controls {
    margin: 25px 0;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
  }
  select, button {
    padding: 14px 24px;
    font-size: 1.1rem;
    border: none;
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s;
  }
  button {
    background: var(--primary);
    color: white;
    font-weight: bold;
  }
  button:hover { transform: translateY(-4px) scale(1.05); box-shadow: 0 15px 30px rgba(139,92,246,0.4); }
  .stats {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin: 30px 0;
    font-size: 1.4rem;
    font-weight: bold;
  }
  .game-board {
    display: grid;
    gap: 14px;
    margin: 30px auto;
    padding: 25px;
    background: rgba(255,255,255,0.08);
    border-radius: 24px;
    backdrop-filter: blur(12px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  }
  .card {
    aspect-ratio: 1;
    background: var(--dark);
    border-radius: 20px;
    cursor: pointer;
    position: relative;
    transform-style: preserve-3d;
    transition: all 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
  }
  .card.flip { transform: rotateY(180deg) scale(1.05); }
  .card.match {
    animation: matchPulse 0.8s ease-out;
    background: linear-gradient(135deg, #10b981, #34d399) !important;
  }
  @keyframes matchPulse {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.2); box-shadow: 0 0 40px #34d399; }
  }
  .front, .back {
    position: absolute;
    width: 100%; height: 100%;
    backface-visibility: hidden;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4rem;
  }
  .back {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  }
  .front {
    background: white;
    color: #333;
    transform: rotateY(180deg);
  }
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    visibility: hidden;
    opacity: 0;
    transition: all 0.5s;
    z-index: 100;
  }
  .modal.show { visibility: visible; opacity: 1; }
  .modal-content {
    background: linear-gradient(135deg, #1e293b, #0f172a);
    padding: 50px;
    border-radius: 30px;
    text-align: center;
    transform: scale(0.7);
    transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 20px 60px rgba(0,0,0,0.8);
    border: 2px solid #8b5cf6;
  }
  .modal.show .modal-content { transform: scale(1); }
  @media (max-width: 600px) {
    h1 { font-size: 2.5rem; }
    .front { font-size: 2.5rem !important; }
    .stats { flex-direction: column; gap: 15px; }
  }
</style>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>

<div class="container">
  <h1>Epic Memory Game</h1>
  <div class="powered">Powered by <strong>Greek Games Studios</strong></div>

  <div class="controls">
    <select id="difficulty">
      <option value="4">Easy (4√ó4)</option>
      <option value="6" selected>Normal (6√ó4)</option>
      <option value="8">Hard (8√ó6)</option>
    </select>
    <select id="theme">
      <option value="emoji">Emoji Explosion</option>
      <option value="animals">Wild Animals</option>
      <option value="food">Yummy Food</option>
      <option value="flags">World Flags</option>
      <option value="pokemon">Pok√©mon</option>
      <option value="superhero">Superheroes</option>
      <option value="gaming">Gaming Icons</option>
      <option value="crypto">Crypto</option>
      <option value="cars">Sports Cars</option>
      <option value="space">Space & Planets</option>
    </select>
    <button id="newGame">New Game</button>
  </div>

  <div class="stats">
    <div>Time: <span id="timer">00:00</span></div>
    <div>Moves: <span id="moves">0</span></div>
    <div>Score: <span id="score">1000</span></div>
  </div>

  <div id="gameBoard" class="game-board"></div>
</div>

<div class="modal" id="winModal">
  <div class="modal-content">
    <h2>‚òÖ VICTORY! ‚òÖ</h2>
    <p>You completed the game!</p>
    <p>Time: <strong id="finalTime"></strong></p>
    <p>Moves: <strong id="finalMoves"></strong></p>
    <p>Final Score: <strong id="finalScore"></strong></p>
    <button onclick="newGame()" style="margin-top:20px; padding:15px 40px; font-size:1.3rem;">Play Again</button>
  </div>
</div>

<script>
// Confetti function (inline)
function launchConfetti() {
  const count = 300, defaults = { origin: { y: 0.7 } };
  function fire(particleRatio, opts) {
    confetti(Object.assign({}, defaults, opts, {
      particleCount: Math.floor(count * particleRatio)
    }));
  }
  fire(0.25, { spread: 26, startVelocity: 55 });
  fire(0.2,  { spread: 60 });
  fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
  fire(0.1,  { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
  fire(0.1,  { spread: 120, startVelocity: 45 });
}

// Confetti library (self-contained)
const confetti = function() {
  var t = document.createElement("canvas");
  t.style.position = "fixed";
  t.style.top = 0;
  t.style.left = 0;
  t.style.width = "100%";
  t.style.height = "100%";
  t.style.pointerEvents = "none";
  t.style.zIndex = 9999;
  document.body.appendChild(t);
  var i = t.getContext("2d"), n = window.innerWidth, o = window.innerHeight;
  function r() { n = window.innerWidth; o = window.innerHeight; t.width = n; t.height = o; }
  window.addEventListener("resize", r); r();
  return function(e) {
    e = e || {};
    var s = e.particleCount || 100, a = e.angle || 90, l = e.spread || 45, c = e.startVelocity || 45,
        d = e.decay || 0.9, u = e.scalar || 1, h = e.origin || {x:0.5,y:0.5},
        f = e.colors || ["#a786ff","#8b5cf6","#6366f1","#3b82f6","#06b6d4"];
    for (var p = 0; p < s; p++) {
      var m = a * Math.PI / 180 + (Math.random() - 0.5) * l * Math.PI / 180,
          v = c * (0.5 + Math.random()), g = {x: n * h.x, y: o * h.y, vx: Math.cos(m) * v, vy: Math.sin(m) * v,
              life: 100, color: f[Math.floor(Math.random()*f.length)], size: 8 * u * Math.random()};
      !function e() {
        g.life -= 2; if (g.life <= 0) return;
        g.x += g.vx; g.y += g.vy; g.vy += 0.2; g.vx *= d; g.vy *= d;
        i.fillStyle = g.color; i.globalAlpha = g.life/100;
        i.fillRect(g.x - g.size/2, g.y - g.size/2, g.size, g.size);
        requestAnimationFrame(e);
      }()
    }
  }
}();

// Themes (10 themes!)
const themes = {
  emoji: ['üéà','üé®','üéØ','üéÆ','üé≤','üé™','üé≠','ü§©','ü•≥','üöÄ','üåü','üçÑ','üîÆ','üíé','üßø','üèÜ'],
  animals: ['ü¶Å','üêØ','üê∫','ü¶ä','üêª','üêº','üê®','üê∏','ü¶â','ü¶Ö','ü¶ú','ü¶ö','üêô','ü¶ë','üê≥','ü¶à'],
  food: ['üçï','üçî','üåÆ','üç£','ü•ó','üç∞','üç¶','ü•§','üçâ','üçá','üçì','üçç','üçí','ü•ë','üåΩ','üç©'],
  flags: ['üá¨üá∑','üáÆüáπ','üá™üá∏','üá´üá∑','üá©üá™','üá¨üáß','üá∫üá∏','üáØüáµ','üáßüá∑','üá®üá¶','üá¶üá∫','üá≥üá±','üá∏üá™','üá≥üá¥','üáµüáπ','üáπüá∑'],
  pokemon: ['‚ö°','üî•','üíß','üåø','ü¶é','ü¶á','üêâ','üê¶','üê¢','ü¶î','ü¶®','ü¶¶','ü¶•','ü¶®','ü¶©','ü¶í'],
  superhero: ['ü¶∏','ü¶π','ü¶∏‚Äç‚ôÄÔ∏è','ü¶π‚Äç‚ôÇÔ∏è','üí™','ü¶æ','‚ö°','üï∏Ô∏è','üï∑Ô∏è','ü¶á','üåü','üî¥','üîµ','üü¢','üü°','üü£'],
  gaming: ['üéÆ','üïπÔ∏è','üé≤','üÉè','üïπÔ∏è','üèéÔ∏è','‚úàÔ∏è','üöÄ','üõ∏','üíæ','üíø','üñ±Ô∏è','‚å®Ô∏è','üñ•Ô∏è','üï∏Ô∏è','üî´'],
  crypto: ['‚Çø','Œû','≈Å','‚óà','‚óÜ','‚ñ≤','‚ñº','‚òÖ','‚òÜ','‚ö°','üî∑','üî∂','üí†','üî∫','üîª','üü†'],
  cars: ['üèéÔ∏è','üöî','üöì','üöí','üöë','üöú','üèçÔ∏è','üõµ','üö≤','üõ∫','üö†','üö°','üõ©Ô∏è','üöÅ','üõ∏','üöÄ'],
  space: ['üåç','üåé','üåè','üåï','üåñ','üåõ','üåü','‚≠ê','‚ú®','üöÄ','üõ∏','üåå','ü™ê','‚òÑÔ∏è','üå†','üëΩ']
};

let cards = [], flippedCards = [], moves = 0, score = 1000, timer, seconds = 0, isProcessing = false;
const gameBoard = document.getElementById('gameBoard');

function startGame() {
  clearInterval(timer); seconds = 0; moves = 0; score = 1000;
  updateStats(); startTimer();

  const size = parseInt(document.getElementById('difficulty').value);
  const cols = size === 8 ? 8 : size;
  const rows = size === 8 ? 6 : 4;
  const totalCards = cols * rows;
  const pairs = totalCards / 2;

  gameBoard.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

  const selectedTheme = themes[document.getElementById('theme').value];
  const icons = selectedTheme.slice(0, pairs);
  cards = [...icons, ...icons];
  cards.sort(() => Math.random() - 0.5);

  gameBoard.innerHTML = '';
  cards.forEach((icon, i) => {
    const card = document.createElement('div');
    card.classList.add('card');
    card.dataset.icon = icon;
    card.innerHTML = `<div class="back">?</div><div class="front">${icon}</div>`;
    card.addEventListener('click', flipCard);
    setTimeout(() => gameBoard.appendChild(card), i * 50); // staggered appear
  });
}

function flipCard() {
  if (isProcessing || this.classList.contains('flip') || this.classList.contains('match')) return;
  this.classList.add('flip');
  flippedCards.push(this);
  beep(300, 0.1);
  if (flippedCards.length === 2) {
    isProcessing = true;
    moves++;
    score -= 5;
    updateStats();
    setTimeout(checkMatch, 1000);
  }
}

function checkMatch() {
  const [a, b] = flippedCards;
  if (a.dataset.icon === b.dataset.icon) {
    a.classList.add('match');
    b.classList.add('match');
    score += 60;
    beep(900, 0.3);
    flippedCards = [];
    isProcessing = false;
    updateStats();
    checkWin();
  } else {
    setTimeout(() => {
      a.classList.remove('flip');
      b.classList.remove('flip');
      beep(180, 0.4);
      flippedCards = [];
      isProcessing = false;
    }, 900);
  }
}

function checkWin() {
  if (document.querySelectorAll('.match').length === cards.length) {
    clearInterval(timer);
    document.getElementById('finalTime').textContent = document.getElementById('timer').textContent;
    document.getElementById('finalMoves').textContent = moves;
    document.getElementById('finalScore').textContent = Math.max(score, 0);
    document.getElementById('winModal').classList.add('show');
    setTimeout(launchConfetti, 500);
  }
}

function updateStats() {
  document.getElementById('moves').textContent = moves;
  document.getElementById('score').textContent = Math.max(score, 0);
}

function startTimer() {
  timer = setInterval(() => {
    seconds++;
    const m = String(Math.floor(seconds / 60)).padStart(2,'0');
    const s = String(seconds % 60).padStart(2,'0');
    document.getElementById('timer').textContent = `${m}:${s}`;
    if (seconds % 15 === 0) score = Math.max(score - 3, 0);
    updateStats();
  }, 1000);
}

function beep(f=440, d=0.1) {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.connect(g); g.connect(ctx.destination);
  o.frequency.value = f;
  o.type = 'sine';
  g.gain.setValueAtTime(0.3, ctx.currentTime);
  o.start(); o.stop(ctx.currentTime + d);
}

function newGame() {
  document.getElementById('winModal').classList.remove('show');
  startGame();
}

document.getElementById('newGame').addEventListener('click', newGame);
document.getElementById('difficulty').addEventListener('change', newGame);
document.getElementById('theme').addEventListener('change', newGame);

startGame();
</script>
</body>
</html>